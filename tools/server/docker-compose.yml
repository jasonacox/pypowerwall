version: '3.8'

services:
  pypowerwall-server:
    build: .
    container_name: pypowerwall-server
    ports:
      - "8080:8080"
    environment:
      # Single gateway mode - TEDAPI only (read-only)
      - PW_HOST=192.168.91.1
      - PW_PASSWORD=your-gateway-password
      
      # Optional: Add cloud auth for control operations
      # First run: python3 -m pypowerwall setup (generates auth files)
      # - PW_EMAIL=your-tesla-account@email.com
      # - PW_AUTHPATH=/auth
      
      - PW_TIMEZONE=America/Los_Angeles
      
      # Or multi-gateway mode (uncomment and edit):
      # - PW_GATEWAYS=[{"id":"home","name":"Home","host":"192.168.91.1","password":"gw_pwd","email":"tesla@email.com","authpath":"/auth"}]
      
      # CORS settings
      - CORS_ORIGINS=["*"]
      
      # Control features (optional) - Uncomment to enable:
      # - CONTROL_ENABLED=true
      # - CONTROL_TOKEN=your-secure-random-token-here
    restart: unless-stopped
    networks:
      - pypowerwall

networks:
  pypowerwall:
    driver: bridge
