# PyPowerwall Server Environment Configuration

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# CORS Origins (comma-separated)
# CORS_ORIGINS=["*"]

# ==========================================
# CONTROL FEATURES (Optional)
# ==========================================
# Enable control operations (reserve level, operating mode, etc.)
# When enabled, authentication is REQUIRED using CONTROL_TOKEN
# Default: disabled (read-only monitoring)

# CONTROL_ENABLED=true
# CONTROL_TOKEN=your-secure-random-token-here

# ==========================================
# SINGLE GATEWAY MODE (Legacy Compatibility)
# ==========================================
# Uncomment and configure for single gateway:

# Local access via TEDAPI (fast, for data reads)
# PW_HOST=192.168.91.1
# PW_GW_PWD=your-gateway-wifi-password  # From QR code on gateway

# Optional: Tesla Cloud auth for control operations
# If you want to control your Powerwall (set reserve, mode, etc.),
# authenticate via Tesla and provide path to auth files:
# PW_EMAIL=your-tesla-account@email.com
# PW_AUTHPATH=/path/to/auth/files  # Directory containing .pypowerwall.auth and .pypowerwall.site

# Timezone
# PW_TIMEZONE=America/Los_Angeles

# HYBRID MODE (Recommended for Control):
# Use TEDAPI for fast local data reads + Cloud auth for control:
# PW_HOST=192.168.91.1
# PW_GW_PWD=your-gateway-wifi-password
# PW_EMAIL=your-tesla-account@email.com
# PW_AUTHPATH=/path/to/auth/files

# ==========================================
# MULTI-GATEWAY MODE
# ==========================================
# Uncomment and configure for multiple gateways (JSON format):
# Each gateway can have gw_pwd (TEDAPI) and/or email+authpath (Cloud)

# PW_GATEWAYS=[{"id":"home","name":"Home Gateway","host":"192.168.91.1","gw_pwd":"gw_pwd_1","email":"tesla@email.com","authpath":"/auth","timezone":"America/Los_Angeles"},{"id":"cabin","name":"Cabin Gateway","host":"192.168.91.1","gw_pwd":"gw_pwd_2","email":"tesla@email.com","authpath":"/auth","timezone":"America/Los_Angeles"}]

# ==========================================
# v1r LAN MODE (Wired Ethernet to PW3)
# ==========================================
# Full v1r: RSA-signed protobufs over wired LAN (requires FleetAPI key registration)
# Only PW_GW_PWD is needed â€” the last 5 chars are auto-derived for /api/login/Basic.
# PW_HOST=10.42.1.56                          # Powerwall vendor subnet IP (NOT home LAN IP)
# PW_GW_PWD=your-full-gateway-password        # Full password from QR sticker on gateway
# PW_RSA_KEY_PATH=/path/to/tedapi_rsa_private.pem
# PW_TIMEZONE=America/Los_Angeles

# Basic LAN (no RSA key): Only 3 JSON endpoints (aggregates, soe, grid_status)
# PW_HOST=10.42.1.56
# PW_PASSWORD=XXXXX                           # Last 5 chars of gateway password
# PW_TIMEZONE=America/Los_Angeles

# ==========================================
# CLOUD MODE EXAMPLE
# ==========================================
# Pure cloud mode (no local TEDAPI)
# Requires: pypowerwall cloud authentication (generates .pypowerwall.auth/.site files)
# Run: python3 -m pypowerwall setup
# PW_EMAIL=your-email@example.com
# PW_AUTHPATH=/path/to/auth/directory
